# About
Endianess issue confirmed.


## EdgeRouter-X
Using the known good DUID file (generated by dhcp6c):

```
$  cat /tmp/dhcp6c_duid | base64 
DgAAAQABIk2wAAQY1gZhCg==
```

I can show the correct DUID via the following:

```
$ DUID_FILE=/tmp/dhcp6c_duid opt/vyatta/sbin/dhcpv6-pd-duid.pl --action=show
Using File: /tmp/dhcp6c_duid
DUID 00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a
```

Using this DUID I attempt to "create" the file, using `--action=gen`:

```
$ DUID_FILE=/tmp/dhcp6c_duid2 opt/vyatta/sbin/dhcpv6-pd-duid.pl --action=set \
   --duid='00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a'
Using File: /tmp/dhcp6c_duid2
```

Attempting to then show the contents of this new file has the following result:

```
$ DUID_FILE=/tmp/dhcp6c_duid2 opt/vyatta/sbin/dhcpv6-pd-duid.pl --action=show
Using File: /tmp/dhcp6c_duid2
DUID 00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
```


From there, I want to run a diff on the contents of the two files:

```
$ diff <(hexdump /tmp/dhcp6c_duid) <(hexdump /tmp/dhcp6c_duid2)
1c1
< 0000000 000e 0100 0100 4d22 00b0 1804 06d6 0a61
---
> 0000000 0e00 0100 0100 4d22 00b0 1804 06d6 0a61
```

We can confirm that the only difference is in the first 16 bit word with the
ordering of the byte significance. 


## EdgeRouter Pro-8

Using the DUID from above we attempt to load it into a temp file.

```
bharrington@ur1:~$ cat | base64 -d  > /tmp/dhcp6c_duid
DgAAAQABIk2wAAQY1gZhCg==
bharrington@ur1:~$ DUID_FILE=/tmp/dhcp6c_duid  /tmp/dhcpv6-pd-duid.pl --action=show
Using File: /tmp/dhcp6c_duid
DUID 00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
```

Since that is unexpected behavior, we need to compare the files:

```
$ sha256sum /tmp/dhcp6c_duid
f7c1c471dc01688ea01daf4152c063dd5cb49fa16c9355d90cfab73d87df487c  /tmp/dhcp6c_duid
```


And back on my AMD64 host:

```
$ sha256sum /tmp/dhcp6c_duid
f7c1c471dc01688ea01daf4152c063dd5cb49fa16c9355d90cfab73d87df487c  /tmp/dhcp6c_duid
```

And finally checking this on my Edgerouter-X:

```
ubnt@panic:~$ sha256sum /tmp/dhcp6c_duid
f7c1c471dc01688ea01daf4152c063dd5cb49fa16c9355d90cfab73d87df487c  /tmp/dhcp6c_duid
```

So there is clearly some backwards logic in this script.


I went back to the EdgeRouter Pro-8 and dug in further on this.  I used the `--set` 
mechanism to try and verify the behavior:

```
$ DUID_FILE=/tmp/dhcp6c_duid2  /tmp/dhcpv6-pd-duid.pl --action=set --duid='00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a'
Using File: /tmp/dhcp6c_duid2
```

and then read it back:

```
$ DUID_FILE=/tmp/dhcp6c_duid2  /tmp/dhcpv6-pd-duid.pl --action=show
Using File: /tmp/dhcp6c_duid2
DUID 00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a
```

Then, performing the `hexdump`, we see the following:

```
$ hexdump /tmp/dhcp6c_duid2
0000000 000e 0001 0001 224d b000 0418 d606 610a
0000010
```

Thus, across platforms we see this breakdown (all when using DUID 
`00:01:00:01:22:4d:b0:00:04:18:d6:06:61:0a`):

| Platform         | CPU    | Endianess | Output                                    |
| ---              | ---    | ---       | ---                                       |
| Laptop           | AMD64  | Little    | `000e 0100 0100 4d22 00b0 1804 06d6 0a61` |
| EdgeRouter X     | MIPS64 | Little    | `000e 0100 0100 4d22 00b0 1804 06d6 0a61` |
| Edgerouter Pro 8 | MIPS64 | Big       | `000e 0001 0001 224d b000 0418 d606 610a` |


